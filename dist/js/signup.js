import{a as t,b,c as S}from"./chunk-KFDSKYZU.js";function p(e,i){let o=i.split("@")[1],r=b.find(c=>c.domains.includes(o)),l=e.innerHTML,s;r===void 0?s=document.createElement("span"):(s=document.createElement("a"),s.setAttribute("href",r.inboxUrl),s.setAttribute("target","_blank")),s.setAttribute("class","inbox-link"),s.innerHTML=l,e.replaceWith(s)}function g(e,i,n,o){e&&e.setAttribute("disabled",""),i&&i.classList.remove(t.hiddenClass),n&&n.classList.add(t.hiddenClass),o&&o.classList.add(t.hiddenClass)}function h(e,i){e&&e.removeAttribute("disabled"),i&&i.classList.add(t.hiddenClass)}function y(e,i){let n=e.getAttribute("action"),o=new FormData(i),r={};o.forEach((a,L)=>{r[L]=a});let l=o.get("email");if(!l)return;let s=document.querySelector(t.formSelector+' [type="submit"]'),c=document.querySelector(t.formSuccessMsgSelector),m=document.querySelector(t.formErrorMsgSelector),u=document.querySelector(t.formInboxLinkSelector),f=document.querySelector(t.formSpinnerSelector);g(s,f,c,m),S(n,r).then(a=>{a?c?(u&&p(u,l),c.classList.remove(t.hiddenClass),e.reset()):console.log("Signup successful!",a):m&&m.classList.remove(t.hiddenClass),h(s,f)})}var d=document.querySelector(t.formSelector);d&&d.addEventListener("submit",e=>{e.preventDefault(),y(d,e.target)});
